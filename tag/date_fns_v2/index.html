<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/assets/favicon.png" rel="shortcut icon" type="image/x-icon">

    <title>date-fns</title>
    <meta name="description" content="date-fns news and updates">

    <!-- TODO: Render selected fonts here -->
    <!--<link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">-->

    
      <meta name="twitter:card" content="summary">
      <!-- TODO: Collect and pass from user channel.settings -->
      <!-- <meta name="twitter:site" content="@nytimesbits" /> -->
      <!-- <meta name="twitter:creator" content="@nickbilton" /> -->
      
      

      <meta property="og:url" content="https://blog.date-fns.org/tag/date_fns_v2">

      
      <meta itemprop="name" content="date-fns">
      <meta property="og:title" content="date-fns">
      <meta name="twitter:title" content="date-fns">
      

      
      <meta itemprop="description" content="date-fns news and updates">
      <meta property="og:description" content="date-fns news and updates">
      <meta name="twitter:description" content="date-fns news and updates">
      

      
      <meta property="og:image" content="/assets/AQADAgATv-m3DgAEms4Szlwc8yiURQMAAQI">
      <meta itemprop="image" content="/assets/AQADAgATv-m3DgAEms4Szlwc8yiURQMAAQI">
      

      
    

        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-71951329-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-71951329-2');
    </script>
    
      </head>
  <body>
    
    <link rel="stylesheet" type="text/css" href="../../assets/web-6b7e93b81ce83c0dd6a5.css">
    <div id="ui"><div><meta name="twitter:widgets:theme" content="light"></div><div class="index--Layout-39g3x"><div class="index--ContentWrapper-39g3x"><div class="TopBar--Wrapper-1940b"><div class="index--H-15a2g index--H-adjusted-15a2g index--H-expanded-15a2g index--H-fullWidth-15a2g index--H-paddedH-xlarge-15a2g"><div class="Logotype--Wrapper-3ilyn"><a class="AbstractLink--A-2awh2" href="../../"><div class="index--H-15a2g index--H-adjusted-15a2g index--H-size-small-15a2g"><img class="Avatar--Image-2aap8 Avatar--Image-size-small-2aap8" src="/assets/AQADAgATv-m3DgAEY7fnu_zD8_GSRQMAAQI"><div class="index--Header-fong0 index--Header-size-small-fong0">date-fns</div></div></a></div><div class="index--Hide-iv2q2 index--Hide-on-mobileMedium-iv2q2"><div class="index--H-15a2g index--H-adjusted-15a2g"><a class="index--Button-1n9w3 index--Button-size-large-1n9w3" rel="noopener noreferrer" href="https://t.me/date_fns"><div class="index--H-15a2g index--H-adjusted-15a2g index--H-size-small-15a2g"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"/></svg></span><div>Subscribe</div></div></a></div></div><div class="index--Show-iv2q2 index--Show-on-mobileMedium-iv2q2"><button class="TopBar--MenuButton-1940b"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-large-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M442 114H6a6 6 0 0 1-6-6V84a6 6 0 0 1 6-6h436a6 6 0 0 1 6 6v24a6 6 0 0 1-6 6zm0 160H6a6 6 0 0 1-6-6v-24a6 6 0 0 1 6-6h436a6 6 0 0 1 6 6v24a6 6 0 0 1-6 6zm0 160H6a6 6 0 0 1-6-6v-24a6 6 0 0 1 6-6h436a6 6 0 0 1 6 6v24a6 6 0 0 1-6 6z"/></svg></span></button></div></div></div><div class="index--V-15a2g index--V-paddedH-xlarge-15a2g index--V-size-large-15a2g"><div class="index--ContentWrapper-39g3x"><div class="index--V-15a2g index--V-size-large-15a2g"><div><a class="index--Button-1n9w3 index--Button-size-large-1n9w3 index--Button-transparent-1n9w3" href>#date_fns_v2</a></div><div class="index--Card-39g3x"><div class="index--El-15a2g index--El-padded-15a2g index--El-size-xlarge-15a2g"><div class="index--V-15a2g index--V-size-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><a class="AbstractLink--Undecorated-2awh2" href="../../post/v2-api-design-stick-to-existing-standards-2dpigcwprs69u/"><h1 class="index--Header-bold-fong0 index--Header-fong0 index--Header-size-large-fong0">v2 API design: Stick to existing standards</h1></a><div class="index--H-15a2g index--H-adjusted-15a2g"><a class="AbstractLink--A-2awh2" href="../../post/v2-api-design-stick-to-existing-standards-2dpigcwprs69u/">Nov 21, 2018</a><div class="index--Text-color-secondary-fong0 index--Text-fong0">3 mins read</div><div class="index--Text-color-secondary-fong0 index--Text-fong0">Sasha üêëüí® Koss</div></div></div><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">One of the most important changes in v2 is the new API design. We carefully refined every function to make date-fns consistent, predictable and reliable. This post is the third post on API design where I tell about our decision to stick to existing standards. </p><p class="index--Text-fong0 index--Text-size-large-fong0">You can read the opening post here: <a class="AbstractLink--A-2awh2" target="_blank" rel="noopener noreferrer" href="../../post/date-fns-v2-goals-and-values-3q4uj0mon4lhp/">https://blog.date-fns.org/post/date-fns-v2-goals-and-values-3q4uj0mon4lhp</a></p><div><div class="ExtendedNode--Wrapper-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><div class="LinkPreview--Wrapper-3mjlt"><a class="AbstractLink--Undecorated-2awh2" target="_blank" rel="noopener noreferrer" href="../../post/date-fns-v2-goals-and-values-3q4uj0mon4lhp/"><div class="LinkPreview--Inner-3mjlt"><div class="index--El-15a2g index--El-paddedH-xlarge-15a2g index--El-paddedV-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><div class="index--H-15a2g index--H-size-small-15a2g"><div class="index--V-15a2g index--V-size-xsmall-15a2g"><div class="index--Header-fong0 index--Header-size-xsmall-fong0" secondary>date-fns</div><div class="index--Header-fong0 index--Header-size-small-fong0">date-fns v2 goals and values</div><div class="index--Text-content-fong0 index--Text-fong0">One of the most important changes in v2 is the new API design. We carefully refined every function to make date-fns consistent, predictable and reliable. In this post, I tell about goals and values that helped us to design simple API that is pleasant to use.</div></div></div></div></div></div></a></div></div></div><blockquote class="Blockquote--Wrapper-2832n"><div class="index--El-15a2g index--El-padded-15a2g"><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">date-fns v2 introduces many new features and breaking changes, and this post is a part of a series <a class="AbstractLink--A-2awh2 AbstractLink--A-strong-2awh2" transparent href>#date_fns_v2</a> where we describe in detail most notable ones.</p></div></div></blockquote><p class="index--Text-fong0 index--Text-size-large-fong0">v2 started with the change of the filenames naming scheme. I come from the Ruby world, so I thought it's a good idea to have file names in underscore format. JavaScript renaissance just started, so there wasn't a common standard. Initially, it was irritating to see so many JavaScript'ers using the camel case format for files. But eventually, I accepted the difference and decided to prioritize common practices over personal taste and adopted camel case as well.</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">// v1
const addDays = require('date-fns/add_days')

// v2
const addDays = require('date-fns/addDays')</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">This breaking change was a turning point that allowed us to abstract from our points of views and habits and embrace existing standards and well-established practices.</p><p class="index--Text-fong0 index--Text-size-large-fong0">One of the most significant changes was adopting Unicode Technical Standard #35 for <span class="index--Code-fong0">format</span> and <span class="index--Code-fong0">parse</span>. It caused a lot of confusion, but I believe it's worth it. You can read about that in a dedicated post:</p><div><div class="ExtendedNode--Wrapper-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><div class="LinkPreview--Wrapper-3mjlt"><a class="AbstractLink--Undecorated-2awh2" target="_blank" rel="noopener noreferrer" href="../../post/unicode-tokens-in-date-fns-v2-sreatyki91jg/"><div class="LinkPreview--Inner-3mjlt"><div class="index--El-15a2g index--El-paddedH-xlarge-15a2g index--El-paddedV-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><div class="index--H-15a2g index--H-size-small-15a2g"><div class="index--V-15a2g index--V-size-xsmall-15a2g"><div class="index--Header-fong0 index--Header-size-xsmall-fong0" secondary>date-fns</div><div class="index--Header-fong0 index--Header-size-small-fong0">Unicode tokens in date-fns v2</div><div class="index--Text-content-fong0 index--Text-fong0">In this post, I tell about how and why we switched from Moment.js formatting tokens to Unicode Technical Standard #35: https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table</div></div></div></div></div></div></a></div></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">Another standard that caused us to revisit naming schema was ISO 8601. Starting with <span class="index--Code-fong0">isWithinRange</span> function we used the word &quot;range&quot; for time spans:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">const isWithinRange = require('date-fns/is_within_range')
isWithinRange(
  new Date(2014, 0, 3), // the date to check
  new Date(2014, 0, 1), // start
  new Date(2014, 0, 7) // end
)
//=&gt; true</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">It turned out that ISO 8601:2004 defines term &quot;interval&quot;:</p><blockquote class="Blockquote--Wrapper-2832n"><div class="index--El-15a2g index--El-padded-15a2g"><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">time interval: part of the time axis limited by two instants</p></div></div></blockquote><p class="index--Text-fong0 index--Text-size-large-fong0">We adopted this terminology and made interval a separate entity:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">import { isWithinInterval } from 'date-fns'
isWithinInterval(new Date(2014, 0, 3), {
  start: new Date(2014, 0, 1),
  end: new Date(2014, 0, 7)
})</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">It also made the code easier to read!</p><p class="index--Text-fong0 index--Text-size-large-fong0">When a string is passed to <span class="index--Code-fong0">new Date()</span>, the JavaScript engine tries to do its best parsing it. In v1 we relied on the mechanism but then quickly learned that different browsers have different parsers and it leads to bugs that hard to find.</p><p class="index--Text-fong0 index--Text-size-large-fong0">Starting with v2, whenever a string represents a date it must be a valid ISO 8601 string overwise you'll get <span class="index--Code-fong0">Invalid Date</span>.</p><div class="index--V-15a2g"><div class="Recap--Divider-jbvil">„Éª„Éª„Éª</div><div class="index--Text-fong0 index--Text-italic-fong0 index--Text-size-large-fong0">In the next posts, I'll continue overview of the v2 API design decisions and changes</div></div></div><div class="Share--Wrapper-3gxqn"><button class="Share--Item-3gxqn Share--Item-color-link-3gxqn"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M301.148 394.702l-79.2 79.19c-50.778 50.799-133.037 50.824-183.84 0-50.799-50.778-50.824-133.037 0-183.84l79.19-79.2a132.833 132.833 0 0 1 3.532-3.403c7.55-7.005 19.795-2.004 20.208 8.286.193 4.807.598 9.607 1.216 14.384.481 3.717-.746 7.447-3.397 10.096-16.48 16.469-75.142 75.128-75.3 75.286-36.738 36.759-36.731 96.188 0 132.94 36.759 36.738 96.188 36.731 132.94 0l79.2-79.2.36-.36c36.301-36.672 36.14-96.07-.37-132.58-8.214-8.214-17.577-14.58-27.585-19.109-4.566-2.066-7.426-6.667-7.134-11.67a62.197 62.197 0 0 1 2.826-15.259c2.103-6.601 9.531-9.961 15.919-7.28 15.073 6.324 29.187 15.62 41.435 27.868 50.688 50.689 50.679 133.17 0 183.851zm-90.296-93.554c12.248 12.248 26.362 21.544 41.435 27.868 6.388 2.68 13.816-.68 15.919-7.28a62.197 62.197 0 0 0 2.826-15.259c.292-5.003-2.569-9.604-7.134-11.67-10.008-4.528-19.371-10.894-27.585-19.109-36.51-36.51-36.671-95.908-.37-132.58l.36-.36 79.2-79.2c36.752-36.731 96.181-36.738 132.94 0 36.731 36.752 36.738 96.181 0 132.94-.157.157-58.819 58.817-75.3 75.286-2.651 2.65-3.878 6.379-3.397 10.096a163.156 163.156 0 0 1 1.216 14.384c.413 10.291 12.659 15.291 20.208 8.286a131.324 131.324 0 0 0 3.532-3.403l79.19-79.2c50.824-50.803 50.799-133.062 0-183.84-50.802-50.824-133.062-50.799-183.84 0l-79.2 79.19c-50.679 50.682-50.688 133.163 0 183.851z"/></svg></span></button><a class="Share--Item-3gxqn Share--Item-color-twitter-3gxqn" href="http://twitter.com/intent/tweet?status=v2%20API%20design%3A%20Stick%20to%20existing%20standards%3A%20https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fv2-api-design-stick-to-existing-standards-2dpigcwprs69u" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-facebook-3gxqn" href="http://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fv2-api-design-stick-to-existing-standards-2dpigcwprs69u" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-telegram-3gxqn" href="https://t.me/share/url?url=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fv2-api-design-stick-to-existing-standards-2dpigcwprs69u&text=v2%20API%20design%3A%20Stick%20to%20existing%20standards" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-vk-3gxqn" href="http://vk.com/share.php?url=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fv2-api-design-stick-to-existing-standards-2dpigcwprs69u&title=v2%20API%20design%3A%20Stick%20to%20existing%20standards" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M545 117.7c3.7-12.5 0-21.7-17.8-21.7h-58.9c-15 0-21.9 7.9-25.6 16.7 0 0-30 73.1-72.4 120.5-13.7 13.7-20 18.1-27.5 18.1-3.7 0-9.4-4.4-9.4-16.9V117.7c0-15-4.2-21.7-16.6-21.7h-92.6c-9.4 0-15 7-15 13.5 0 14.2 21.2 17.5 23.4 57.5v86.8c0 19-3.4 22.5-10.9 22.5-20 0-68.6-73.4-97.4-157.4-5.8-16.3-11.5-22.9-26.6-22.9H38.8c-16.8 0-20.2 7.9-20.2 16.7 0 15.6 20 93.1 93.1 195.5C160.4 378.1 229 416 291.4 416c37.5 0 42.1-8.4 42.1-22.9 0-66.8-3.4-73.1 15.4-73.1 8.7 0 23.7 4.4 58.7 38.1 40 40 46.6 57.9 69 57.9h58.9c16.8 0 25.3-8.4 20.4-25-11.2-34.9-86.9-106.7-90.3-111.5-8.7-11.2-6.2-16.2 0-26.2.1-.1 72-101.3 79.4-135.6z"/></svg></span></a></div><div><a class="index--Button-1n9w3 index--Button-transparent-1n9w3" href="../../post/v2-api-design-stick-to-existing-standards-2dpigcwprs69u/#comments">Leave a comment</a></div></div></div></div><div class="index--Card-39g3x"><div class="index--El-15a2g index--El-padded-15a2g index--El-size-xlarge-15a2g"><div class="index--V-15a2g index--V-size-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><a class="AbstractLink--Undecorated-2awh2" href="../../post/v2-api-design-stick-to-javascript-behavior-whenever-possible-3aaps6i6yjkg3/"><h1 class="index--Header-bold-fong0 index--Header-fong0 index--Header-size-large-fong0">v2 API design: Stick to JavaScript behavior whenever possible</h1></a><div class="index--H-15a2g index--H-adjusted-15a2g"><a class="AbstractLink--A-2awh2" href="../../post/v2-api-design-stick-to-javascript-behavior-whenever-possible-3aaps6i6yjkg3/">Nov 20, 2018</a><div class="index--Text-color-secondary-fong0 index--Text-fong0">5 mins read</div><div class="index--Text-color-secondary-fong0 index--Text-fong0">Sasha üêëüí® Koss</div></div></div><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">One of the most important changes in v2 is the new API design. We carefully refined every function to make date-fns consistent, predictable and reliable. This post is the second post on API design where I tell about our decision to stick to JavaScript behavior and related changes. </p><p class="index--Text-fong0 index--Text-size-large-fong0">You can read the previous post here: <a class="AbstractLink--A-2awh2" target="_blank" rel="noopener noreferrer" href="../../post/date-fns-v2-goals-and-values-3q4uj0mon4lhp/">https://blog.date-fns.org/post/date-fns-v2-goals-and-values-3q4uj0mon4lhp</a></p><div><div class="ExtendedNode--Wrapper-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><div class="LinkPreview--Wrapper-3mjlt"><a class="AbstractLink--Undecorated-2awh2" target="_blank" rel="noopener noreferrer" href="../../post/date-fns-v2-goals-and-values-3q4uj0mon4lhp/"><div class="LinkPreview--Inner-3mjlt"><div class="index--El-15a2g index--El-paddedH-xlarge-15a2g index--El-paddedV-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><div class="index--H-15a2g index--H-size-small-15a2g"><div class="index--V-15a2g index--V-size-xsmall-15a2g"><div class="index--Header-fong0 index--Header-size-xsmall-fong0" secondary>date-fns</div><div class="index--Header-fong0 index--Header-size-small-fong0">date-fns v2 goals and values</div><div class="index--Text-content-fong0 index--Text-fong0">One of the most important changes in v2 is the new API design. We carefully refined every function to make date-fns consistent, predictable and reliable. In this post, I tell about goals and values that helped us to design simple API that is pleasant to use.</div></div></div></div></div></div></a></div></div></div><blockquote class="Blockquote--Wrapper-2832n"><div class="index--El-15a2g index--El-padded-15a2g"><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">date-fns v2 introduces many new features and breaking changes and this post is a part of a series <a class="AbstractLink--A-2awh2 AbstractLink--A-strong-2awh2" transparent href>#date_fns_v2</a> where we describe in detail most notable ones.</p></div></div></blockquote><div class="index--Indent-top-15a2g"><a class="AbstractLink--Undecorated-2awh2" id="why" href="#why"><h2 class="index--Header-fong0">Why</h2></a></div><p class="index--Text-fong0 index--Text-size-large-fong0">The initial idea of the library was to create a set of helpers that will work with the native <span class="index--Code-fong0">Date</span> object. We avoided introducing functionality that already existed in the standard library and named functions as they are part of it. In v2 we decided to go further and made date-fns behave like JavaScript in every aspect.</p><p class="index--Text-fong0 index--Text-size-large-fong0">JavaScript and its behavior is often a subject of just critique. Because of the need for backward compatibility over the years, it accumulated nuances that nowadays considered as a bad language design. Yes, I'm talking about its coercion rules, <span class="index--Code-fong0">NaN</span>, <span class="index--Code-fong0">null</span> and so on.</p><p class="index--Text-fong0 index--Text-size-large-fong0">However, behind every strange looking behavior stands logic consistent across the language. It might be covering weak parts of JavaScript, but it's consistent and if you learn it once it starts making sense.</p><div class="index--Indent-top-15a2g"><a class="AbstractLink--Undecorated-2awh2" id="exceptions" href="#exceptions"><h2 class="index--Header-fong0">Exceptions</h2></a></div><p class="index--Text-fong0 index--Text-size-large-fong0">In v2 we made date-fns throw <span class="index--Code-fong0">TypeError</span> and <span class="index--Code-fong0">RangeError</span> in cases when standard JavaScript functions do it.</p><p class="index--Text-fong0 index--Text-size-large-fong0">Whenever an argument is required, JavaScript throws <span class="index--Code-fong0">TypeError</span>:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">window.fetch()
//=&gt; TypeError: 1 argument required, but only 0 present.</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">From now all functions check if the passed number of arguments is less than the number of required arguments and throw <span class="index--Code-fong0">TypeError</span> exception if so:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">import { addDays } from 'date-fns'
addDays()
//=&gt; TypeError: 2 arguments required, but only 0 present</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">Whenever an argument value is not in the set or range of allowed values, JavaScript throws <span class="index--Code-fong0">RangeError</span>:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">(42).toFixed(-1)
//=&gt; RangeError: toFixed() digits argument must be between 0 and 100</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">From now on functions throw <span class="index--Code-fong0">RangeError</span> if optional values passed to options are not <span class="index--Code-fong0">undefined</span> or have expected values:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">import { formatDistanceStrict } from 'date-fns'
formatDistanceStrict(new Date(2014, 6, 2), new Date(2015, 0, 1), {
  roundingMethod: 'qwe'
})
//=&gt; RangeError: roundingMethod must be 'floor', 'ceil' or 'round'</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0"><strong class="index--Strong-fong0">Coercion</strong>. </p><p class="index--Text-fong0 index--Text-size-large-fong0">Just like JavaScript date-fns coerce passed arguments to the expected type.</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">import { addDays } from 'date-fns'
addDays(new Date(1987, 1, 11), '42')
//=&gt; Wed Mar 25 1987 00:00:00 GMT+0530 (+0530)</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">Despite being the most hated aspect of the language, coercion is quite straightforward and consistent, although it leads to unexpected results in combination with arithmetic operators. </p><p class="index--Text-fong0 index--Text-size-large-fong0">Here are the rules that we use to coerce the arguments:</p><div><div class="ExtendedNode--Wrapper-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><p><img class="Image--Media-10mfj" src="/assets/AgADAgADaKkxG7mcoUsZ6b5D9lp5Rojktw4ABB7A-75_Ocsz7TUDAAEC" srcset="/assets/AgADAgADaKkxG7mcoUsZ6b5D9lp5Rojktw4ABB7A-75_Ocsz7TUDAAEC 1280w, /assets/AgADAgADaKkxG7mcoUsZ6b5D9lp5Rojktw4ABEd99w8KvK7h7jUDAAEC 800w, /assets/AgADAgADaKkxG7mcoUsZ6b5D9lp5Rojktw4ABNgu08JNuUn67DUDAAEC 320w, /assets/AgADAgADaKkxG7mcoUsZ6b5D9lp5Rojktw4ABHuRePHvZzLU6zUDAAEC 90w"></p></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">Here, the columns are what type we expect the argument to be and the rows what we actually supply as an argument ‚Äî for example, in addDays the first argument will be transformed by the rules from the ‚Äúdate‚Äù column, and the second argument by the rules from the ‚Äúnumber‚Äù column, so <span class="index--Code-fong0">addDays(1, '1')</span> is equivalent to <span class="index--Code-fong0">addDays(new Date(1), 1)</span>.</p><div class="index--Indent-top-15a2g"><a class="AbstractLink--Undecorated-2awh2" id="invalid-date" href="#invalid-date"><h2 class="index--Header-fong0">Invalid date</h2></a></div><p class="index--Text-fong0 index--Text-size-large-fong0"><span class="index--Code-fong0">Date</span> internally represented by a number so just like with <span class="index--Code-fong0">Number</span>, incorrect operations on dates results in <span class="index--Code-fong0">Invalid Date</span> (an invalid date is a date which time value is `NaN`):</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">const date = new Date()

date.setHours('nope')
//=&gt; NaN

date
//=&gt; Invalid Date</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">date-fns reflects this behavior and will return <span class="index--Code-fong0">Invalid Date</span> when you pass unconvertable values:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">import { addDays } from 'date-fns/addDays'
addDays(new Date(), 'nope')
//=&gt; Invalid Date</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">This was one of the trade-offs that were particularly hard to make:</p><div><div class="index--Background-1jn7m index--Background-color-secondary-1jn7m"><div class="index--V-15a2g index--V-padded-15a2g"><div class="index--H-15a2g index--H-adjusted-15a2g"><div class="Skeleton--Avatar-background-secondary-rc1dn Skeleton--Avatar-rc1dn"></div><div class="Skeleton--TextChunk-background-secondary-rc1dn Skeleton--TextChunk-rc1dn" style="width: 5rem;"></div></div><div class="Skeleton--Image-background-secondary-rc1dn Skeleton--Image-rc1dn Skeleton--Image-size-large-rc1dn"></div></div></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">On the one hand, we would expect to have an exception when an argument has a wrong value. On the other hand, the exception would force us to wrap every function call into try-catch blocks that is bad developer experience. The standard JavaScript's approach to the problem is to expect the developer to be responsible for validating the user input. In the worst case scenario, the application will print <span class="index--Code-fong0">Invalid Date</span> and keep working that wouldn't happen if we'd throw exceptions.</p><div class="index--Indent-top-15a2g"><a class="AbstractLink--Undecorated-2awh2" id="ongoing-work" href="#ongoing-work"><h2 class="index--Header-fong0">Ongoing work</h2></a></div><p class="index--Text-fong0 index--Text-size-large-fong0">While writing the post, I found an inconsistency that we didn't consider. While <span class="index--Code-fong0">toString</span> called on an invalid date returns <span class="index--Code-fong0">Invalid Date</span>, <span class="index--Code-fong0">toISOString</span> as well as Intl API throws <span class="index--Code-fong0">RangeError</span>:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">date.toString()
//=&gt; 'Invalid Date'

date.toISOString()
//=&gt; RangeError: Invalid time value

new Intl.DateTimeFormat('en-US').format(date)
//=&gt; RangeError: Invalid time value</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">We incorrectly applied <span class="index--Code-fong0">toString</span> behavior to <span class="index--Code-fong0">format</span>:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">import { format } from 'date-fns'

const date = new Date()
date.setHours('nope')

format(date, 'yyyy-MM-dd')
//=&gt; 'Invalid Date'</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">I've opened an issue that we plan to fix before the first beta release:</p><div><div class="ExtendedNode--Wrapper-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><div class="LinkPreview--Wrapper-3mjlt"><a class="AbstractLink--Undecorated-2awh2" target="_blank" rel="noopener noreferrer" href="https://github.com/date-fns/date-fns/issues/987"><div class="LinkPreview--Inner-3mjlt"><div class="index--El-15a2g index--El-paddedH-xlarge-15a2g index--El-paddedV-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><div class="index--H-15a2g index--H-size-small-15a2g"><div class="index--V-15a2g index--V-size-xsmall-15a2g"><div class="index--Header-fong0 index--Header-size-xsmall-fong0" secondary>GitHub</div><div class="index--Header-fong0 index--Header-size-small-fong0">format functions must throw exceptions on attempt on processing invalid dates #987</div><div class="index--Text-content-fong0 index--Text-fong0">See JavaScript's toISOString and Intl API for the reasoning: const date = new Date() date.setHours('nope') //=&gt; NaN date.getYear() //=&gt; NaN date.toISOString() //=&gt; Invalid date date.toISOString() //=&gt; RangeError: Invalid time value new I...</div></div></div></div></div></div></a></div></div></div><div class="index--V-15a2g"><div class="Recap--Divider-jbvil">„Éª„Éª„Éª</div><div class="index--Text-fong0 index--Text-italic-fong0 index--Text-size-large-fong0">In the next posts, I'll continue overview of the v2 API design decisions and changes</div></div></div><div class="Share--Wrapper-3gxqn"><button class="Share--Item-3gxqn Share--Item-color-link-3gxqn"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M301.148 394.702l-79.2 79.19c-50.778 50.799-133.037 50.824-183.84 0-50.799-50.778-50.824-133.037 0-183.84l79.19-79.2a132.833 132.833 0 0 1 3.532-3.403c7.55-7.005 19.795-2.004 20.208 8.286.193 4.807.598 9.607 1.216 14.384.481 3.717-.746 7.447-3.397 10.096-16.48 16.469-75.142 75.128-75.3 75.286-36.738 36.759-36.731 96.188 0 132.94 36.759 36.738 96.188 36.731 132.94 0l79.2-79.2.36-.36c36.301-36.672 36.14-96.07-.37-132.58-8.214-8.214-17.577-14.58-27.585-19.109-4.566-2.066-7.426-6.667-7.134-11.67a62.197 62.197 0 0 1 2.826-15.259c2.103-6.601 9.531-9.961 15.919-7.28 15.073 6.324 29.187 15.62 41.435 27.868 50.688 50.689 50.679 133.17 0 183.851zm-90.296-93.554c12.248 12.248 26.362 21.544 41.435 27.868 6.388 2.68 13.816-.68 15.919-7.28a62.197 62.197 0 0 0 2.826-15.259c.292-5.003-2.569-9.604-7.134-11.67-10.008-4.528-19.371-10.894-27.585-19.109-36.51-36.51-36.671-95.908-.37-132.58l.36-.36 79.2-79.2c36.752-36.731 96.181-36.738 132.94 0 36.731 36.752 36.738 96.181 0 132.94-.157.157-58.819 58.817-75.3 75.286-2.651 2.65-3.878 6.379-3.397 10.096a163.156 163.156 0 0 1 1.216 14.384c.413 10.291 12.659 15.291 20.208 8.286a131.324 131.324 0 0 0 3.532-3.403l79.19-79.2c50.824-50.803 50.799-133.062 0-183.84-50.802-50.824-133.062-50.799-183.84 0l-79.2 79.19c-50.679 50.682-50.688 133.163 0 183.851z"/></svg></span></button><a class="Share--Item-3gxqn Share--Item-color-twitter-3gxqn" href="http://twitter.com/intent/tweet?status=v2%20API%20design%3A%20Stick%20to%20JavaScript%20behavior%20whenever%20possible%3A%20https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fv2-api-design-stick-to-javascript-behavior-whenever-possible-3aaps6i6yjkg3" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-facebook-3gxqn" href="http://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fv2-api-design-stick-to-javascript-behavior-whenever-possible-3aaps6i6yjkg3" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-telegram-3gxqn" href="https://t.me/share/url?url=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fv2-api-design-stick-to-javascript-behavior-whenever-possible-3aaps6i6yjkg3&text=v2%20API%20design%3A%20Stick%20to%20JavaScript%20behavior%20whenever%20possible" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-vk-3gxqn" href="http://vk.com/share.php?url=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fv2-api-design-stick-to-javascript-behavior-whenever-possible-3aaps6i6yjkg3&title=v2%20API%20design%3A%20Stick%20to%20JavaScript%20behavior%20whenever%20possible" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M545 117.7c3.7-12.5 0-21.7-17.8-21.7h-58.9c-15 0-21.9 7.9-25.6 16.7 0 0-30 73.1-72.4 120.5-13.7 13.7-20 18.1-27.5 18.1-3.7 0-9.4-4.4-9.4-16.9V117.7c0-15-4.2-21.7-16.6-21.7h-92.6c-9.4 0-15 7-15 13.5 0 14.2 21.2 17.5 23.4 57.5v86.8c0 19-3.4 22.5-10.9 22.5-20 0-68.6-73.4-97.4-157.4-5.8-16.3-11.5-22.9-26.6-22.9H38.8c-16.8 0-20.2 7.9-20.2 16.7 0 15.6 20 93.1 93.1 195.5C160.4 378.1 229 416 291.4 416c37.5 0 42.1-8.4 42.1-22.9 0-66.8-3.4-73.1 15.4-73.1 8.7 0 23.7 4.4 58.7 38.1 40 40 46.6 57.9 69 57.9h58.9c16.8 0 25.3-8.4 20.4-25-11.2-34.9-86.9-106.7-90.3-111.5-8.7-11.2-6.2-16.2 0-26.2.1-.1 72-101.3 79.4-135.6z"/></svg></span></a></div><div><a class="index--Button-1n9w3 index--Button-transparent-1n9w3" href="../../post/v2-api-design-stick-to-javascript-behavior-whenever-possible-3aaps6i6yjkg3/#comments">Leave a comment</a></div></div></div></div><div class="index--Card-39g3x"><div class="index--El-15a2g index--El-padded-15a2g index--El-size-xlarge-15a2g"><div class="index--V-15a2g index--V-size-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><a class="AbstractLink--Undecorated-2awh2" href="../../post/date-fns-v2-goals-and-values-3q4uj0mon4lhp/"><h1 class="index--Header-bold-fong0 index--Header-fong0 index--Header-size-large-fong0">date-fns v2 goals and values</h1></a><div class="index--H-15a2g index--H-adjusted-15a2g"><a class="AbstractLink--A-2awh2" href="../../post/date-fns-v2-goals-and-values-3q4uj0mon4lhp/">Nov 15, 2018</a><div class="index--Text-color-secondary-fong0 index--Text-fong0">3 mins read</div><div class="index--Text-color-secondary-fong0 index--Text-fong0">Sasha üêëüí® Koss</div></div></div><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">One of the most important changes in v2 is the new API design. We carefully refined every function to make date-fns consistent, predictable and reliable. In this post, I tell about goals and values that helped us to design simple API that is pleasant to use.</p><blockquote class="Blockquote--Wrapper-2832n"><div class="index--El-15a2g index--El-padded-15a2g"><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">date-fns v2 introduces many new features and breaking changes and this post is a part of a series <a class="AbstractLink--A-2awh2 AbstractLink--A-strong-2awh2" transparent href>#date_fns_v2</a> where we describe in detail most notable ones.</p></div></div></blockquote><p class="index--Text-fong0 index--Text-size-large-fong0">When we just started working on date-fns, our only goal was to build a library for working with dates in functional style. For years we were adding more and more functions, often copying and adapting Moment.js API without second look on it.</p><p class="index--Text-fong0 index--Text-size-large-fong0">After a while, we realized that our API and behavior is not as consistent as we want them to be. Arguments in functions doing a similar job were not always in the same order and had a different naming scheme. Sometimes functions were throwing exceptions where they shouldn't and weren't throwing when they should. I'm not talking about coercion logic; it was behind even our understanding.</p><p class="index--Text-fong0 index--Text-size-large-fong0">The need for changes was obvious, but first, we had to define goals and values, that would help us make decisions in ambiguous cases.</p><p class="index--Text-fong0 index--Text-size-large-fong0"><strong class="index--Strong-fong0">Stick to JavaScript behavior whenever possible</strong>. We want date-fns to be an extension of the language and its standard library but not a substitute. We believe that it will ensure a long life of the library in the rapidly changing ecosystem.</p><p class="index--Text-fong0 index--Text-size-large-fong0"><strong class="index--Strong-fong0">Stick to existing standards</strong>. Instead of reinventing the wheel and relying on our subjective opinion we decided to look for current standards and well-established practices. That will provide the best compatibility with other languages and save us from mistakes that others made years if not decades ago.</p><p class="index--Text-fong0 index--Text-size-large-fong0"><strong class="index--Strong-fong0">Consistency</strong>. We want date-fns to be as predictable and easy to understand as possible. Function names, the order of arguments and the behavior must be consistent across the whole library.</p><p class="index--Text-fong0 index--Text-size-large-fong0"><strong class="index--Strong-fong0">Explicitness</strong>. date-fns should prefer explicitness over implicitness. Sometimes the latter helps to make code look cleaner. You know that feeling when a library does what you wanted it to do without saying a word. But more often it causes bugs that are hard to debug or even worse to notice.</p><p class="index--Text-fong0 index--Text-size-large-fong0"><strong class="index--Strong-fong0">Convenience</strong>. We want date-fns to be pleasant to use. We should help developers to avoid mistakes.</p><div class="index--V-15a2g"><div class="Recap--Divider-jbvil">„Éª„Éª„Éª</div><div class="index--Text-fong0 index--Text-italic-fong0 index--Text-size-large-fong0">In the next posts, I'll elaborate every point and tell more about the related changes in the API.</div></div></div><div class="Share--Wrapper-3gxqn"><button class="Share--Item-3gxqn Share--Item-color-link-3gxqn"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M301.148 394.702l-79.2 79.19c-50.778 50.799-133.037 50.824-183.84 0-50.799-50.778-50.824-133.037 0-183.84l79.19-79.2a132.833 132.833 0 0 1 3.532-3.403c7.55-7.005 19.795-2.004 20.208 8.286.193 4.807.598 9.607 1.216 14.384.481 3.717-.746 7.447-3.397 10.096-16.48 16.469-75.142 75.128-75.3 75.286-36.738 36.759-36.731 96.188 0 132.94 36.759 36.738 96.188 36.731 132.94 0l79.2-79.2.36-.36c36.301-36.672 36.14-96.07-.37-132.58-8.214-8.214-17.577-14.58-27.585-19.109-4.566-2.066-7.426-6.667-7.134-11.67a62.197 62.197 0 0 1 2.826-15.259c2.103-6.601 9.531-9.961 15.919-7.28 15.073 6.324 29.187 15.62 41.435 27.868 50.688 50.689 50.679 133.17 0 183.851zm-90.296-93.554c12.248 12.248 26.362 21.544 41.435 27.868 6.388 2.68 13.816-.68 15.919-7.28a62.197 62.197 0 0 0 2.826-15.259c.292-5.003-2.569-9.604-7.134-11.67-10.008-4.528-19.371-10.894-27.585-19.109-36.51-36.51-36.671-95.908-.37-132.58l.36-.36 79.2-79.2c36.752-36.731 96.181-36.738 132.94 0 36.731 36.752 36.738 96.181 0 132.94-.157.157-58.819 58.817-75.3 75.286-2.651 2.65-3.878 6.379-3.397 10.096a163.156 163.156 0 0 1 1.216 14.384c.413 10.291 12.659 15.291 20.208 8.286a131.324 131.324 0 0 0 3.532-3.403l79.19-79.2c50.824-50.803 50.799-133.062 0-183.84-50.802-50.824-133.062-50.799-183.84 0l-79.2 79.19c-50.679 50.682-50.688 133.163 0 183.851z"/></svg></span></button><a class="Share--Item-3gxqn Share--Item-color-twitter-3gxqn" href="http://twitter.com/intent/tweet?status=date-fns%20v2%20goals%20and%20values%3A%20https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fdate-fns-v2-goals-and-values-3q4uj0mon4lhp" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-facebook-3gxqn" href="http://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fdate-fns-v2-goals-and-values-3q4uj0mon4lhp" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-telegram-3gxqn" href="https://t.me/share/url?url=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fdate-fns-v2-goals-and-values-3q4uj0mon4lhp&text=date-fns%20v2%20goals%20and%20values" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-vk-3gxqn" href="http://vk.com/share.php?url=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Fdate-fns-v2-goals-and-values-3q4uj0mon4lhp&title=date-fns%20v2%20goals%20and%20values" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M545 117.7c3.7-12.5 0-21.7-17.8-21.7h-58.9c-15 0-21.9 7.9-25.6 16.7 0 0-30 73.1-72.4 120.5-13.7 13.7-20 18.1-27.5 18.1-3.7 0-9.4-4.4-9.4-16.9V117.7c0-15-4.2-21.7-16.6-21.7h-92.6c-9.4 0-15 7-15 13.5 0 14.2 21.2 17.5 23.4 57.5v86.8c0 19-3.4 22.5-10.9 22.5-20 0-68.6-73.4-97.4-157.4-5.8-16.3-11.5-22.9-26.6-22.9H38.8c-16.8 0-20.2 7.9-20.2 16.7 0 15.6 20 93.1 93.1 195.5C160.4 378.1 229 416 291.4 416c37.5 0 42.1-8.4 42.1-22.9 0-66.8-3.4-73.1 15.4-73.1 8.7 0 23.7 4.4 58.7 38.1 40 40 46.6 57.9 69 57.9h58.9c16.8 0 25.3-8.4 20.4-25-11.2-34.9-86.9-106.7-90.3-111.5-8.7-11.2-6.2-16.2 0-26.2.1-.1 72-101.3 79.4-135.6z"/></svg></span></a></div><div><a class="index--Button-1n9w3 index--Button-transparent-1n9w3" href="../../post/date-fns-v2-goals-and-values-3q4uj0mon4lhp/#comments">Leave a comment</a></div></div></div></div><div class="index--Card-39g3x index--Card-color-secondary-39g3x"><div class="index--El-15a2g index--El-padded-15a2g index--El-size-xlarge-15a2g"><div class="index--H-15a2g index--H-adjusted-15a2g index--H-distributed-15a2g index--H-wrapOn-mobileMedium-15a2g"><div class="index--Header-fong0">Get date-fns posts to your Telegram</div><a class="index--Button-1n9w3 index--Button-size-xlarge-1n9w3" rel="noopener noreferrer" href="https://t.me/date_fns"><div class="index--H-15a2g index--H-adjusted-15a2g index--H-aligned-15a2g index--H-size-small-15a2g"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-large-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"/></svg></span><div>Subscribe</div></div></a></div></div></div><div class="index--Card-39g3x"><div class="index--El-15a2g index--El-padded-15a2g index--El-size-xlarge-15a2g"><div class="index--V-15a2g index--V-size-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><a class="AbstractLink--Undecorated-2awh2" href="../../post/fp-in-date-fns-v2-3vlg53s8y5d3i/"><h1 class="index--Header-bold-fong0 index--Header-fong0 index--Header-size-large-fong0">FP in date-fns v2</h1></a><div class="index--H-15a2g index--H-adjusted-15a2g"><a class="AbstractLink--A-2awh2" href="../../post/fp-in-date-fns-v2-3vlg53s8y5d3i/">Oct 11, 2018</a><div class="index--Text-color-secondary-fong0 index--Text-fong0">3 mins read</div><div class="index--Text-color-secondary-fong0 index--Text-fong0">Sasha üêëüí® Koss</div></div></div><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">In this post, I tell about one of the most exciting features in v2: functional programming submodule. It provides alternative to code chains and enables currying. FP fans will love this!</p><blockquote class="Blockquote--Wrapper-2832n"><div class="index--El-15a2g index--El-padded-15a2g"><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">date-fns v2 introduces many new features and breaking changes and this post is a part of a series <a class="AbstractLink--A-2awh2 AbstractLink--A-strong-2awh2" transparent href>#date_fns_v2</a> where we describe in detail most notable ones.</p></div></div></blockquote><div class="index--Indent-top-15a2g"><a class="AbstractLink--Undecorated-2awh2" id="currying-by-default" href="#currying-by-default"><h2 class="index--Header-fong0">Currying by default</h2></a></div><p class="index--Text-fong0 index--Text-size-large-fong0">FP submodule introduces copies of regular functions which accept <strong class="index--Strong-fong0">arguments in inverse order</strong> and curryied by default. They could be imported from <span class="index--Code-fong0">date-fns/fp</span> and used along with regular functions.</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">const { differenceInDays: regularDifferenceInDays } = require('date-fns')
const { differenceInDays: fpDifferenceInDays } = require('date-fns/fp')

regularDifferenceInDays(Date.now(), 0)
//=&gt; 17815

fpDifferenceInDays(0, Date.now())
//=&gt; 17815

fpDifferenceInDays(0)(Date.now())
//=&gt; 17815

const daysSinceUnixEpoch = fpDifferenceInDays(0)
daysSinceUnixEpoch(Date.now())
//=&gt; 17815</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">We also refined the order of arguments in the regular functions so they would work well with currying.</p><div class="index--Indent-top-15a2g"><a class="AbstractLink--Undecorated-2awh2" id="usage-with-options" href="#usage-with-options"><h2 class="index--Header-fong0">Usage with options</h2></a></div><p class="index--Text-fong0 index--Text-size-large-fong0">Each FP function comes in two variations: </p><p class="index--Text-fong0 index--Text-size-large-fong0">1. One that accepts <span class="index--Code-fong0">options</span> as the first argument. Such functions has <span class="index--Code-fong0">WithOptions</span> added to the end of its name.<div class="index--Vbr-15a2g"></div>2. Another that doesn't have the options argument.</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">const { format, formatWithOptions } = require('date-fns/fp')
const { eo, ru } = require('date-fns/locale')

const dateFormat = 'LLLL yyyy'

const english = format(dateFormat)
const russian = formatWithOptions({ locale: ru }, dateFormat)
const esperanto = formatWithOptions({ locale: eo }, dateFormat)

english(Date.now())
//=&gt; 'October 2018'

russian(Date.now())
//=&gt; '–æ–∫—Ç—è–±—Ä—å 2018'

esperanto(Date.now())
//=&gt; 'oktobro 2018'</pre></div></div><div class="index--Indent-top-15a2g"><a class="AbstractLink--Undecorated-2awh2" id="lodash-compatibility" href="#lodash-compatibility"><h2 class="index--Header-fong0">Lodash compatibility</h2></a></div><p class="index--Text-fong0 index--Text-size-large-fong0">FP submodule was inspired by Lodash and fully compatible with it. You can use its helpers to compose date-fns functions:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">import { flow } from 'lodash/fp'
import { setDate, addDays, addMonths, format } from 'date-fns/fp'

const { flow } = require('lodash/fp')
const { setDate, addDays, addMonths, format } = require('date-fns/fp')

const idealDate = format('yyyy-MM-dd')
const firstDayNextMonth = flow(
  addMonths(1),
  setDate(1)
)
const nearestSunday = date =&gt; date.getDay() &amp;&amp; addDays(7 - date.getDay(), date)
const nextMonthSunday = flow(
  firstDayNextMonth,
  nearestSunday,
  idealDate
)

nextMonthSunday(Date.now())
//=&gt;  '2018-11-04'</pre></div></div><div class="index--Indent-top-15a2g"><a class="AbstractLink--Undecorated-2awh2" id="price-of-pureness" href="#price-of-pureness"><h2 class="index--Header-fong0">Price of pureness</h2></a></div><p class="index--Text-fong0 index--Text-size-large-fong0">While we were working on the FP submodule we realized that functions which create an internal state (e.g. `isToday`) couldn't be safely curried and might cause bugs as in the given example:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">import { distanceInWordsToNowWithOptions } from 'date-fns/fp'
const distanceInWordsToNow = distanceInWordsToNowWithOptions({ addSuffix: true })

// Days later you'll get an expected behavior:
const result = distanceInWordsToNow(Date.now())</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">So we've removed all functions that involve creating a date, and it made date-fns 100% pure library.</p><div><div class="ExtendedNode--Wrapper-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><div class="LinkPreview--Wrapper-3mjlt"><a class="AbstractLink--Undecorated-2awh2" target="_blank" rel="noopener noreferrer" href="https://github.com/date-fns/date-fns/issues/377"><div class="LinkPreview--Inner-3mjlt"><div class="index--El-15a2g index--El-paddedH-xlarge-15a2g index--El-paddedV-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><div class="index--H-15a2g index--H-size-small-15a2g"><div class="index--V-15a2g index--V-size-xsmall-15a2g"><div class="index--Header-fong0 index--Header-size-xsmall-fong0" secondary>GitHub</div><div class="index--Header-fong0 index--Header-size-small-fong0">Remove all functions that create the current date internally #377</div><div class="index--Text-content-fong0 index--Text-fong0">Hello everyone! I've decided to delete a lot of functions in v2.0.0. Here is the list of them: distanceInWordsToNow isFuture isPast endOfToday endOfTomorrow endOfYesterday startOfToday startOfTomorrow startOfYesterday isToday isTomorrow ...</div></div></div></div></div></div></a></div></div></div><div class="index--V-15a2g"><div class="Recap--Divider-jbvil">„Éª„Éª„Éª</div><div class="index--Text-fong0 index--Text-italic-fong0 index--Text-size-large-fong0">Happy coding time! Please support us at Open Collective: opencollective.com/date-fns</div></div></div><div class="Share--Wrapper-3gxqn"><button class="Share--Item-3gxqn Share--Item-color-link-3gxqn"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M301.148 394.702l-79.2 79.19c-50.778 50.799-133.037 50.824-183.84 0-50.799-50.778-50.824-133.037 0-183.84l79.19-79.2a132.833 132.833 0 0 1 3.532-3.403c7.55-7.005 19.795-2.004 20.208 8.286.193 4.807.598 9.607 1.216 14.384.481 3.717-.746 7.447-3.397 10.096-16.48 16.469-75.142 75.128-75.3 75.286-36.738 36.759-36.731 96.188 0 132.94 36.759 36.738 96.188 36.731 132.94 0l79.2-79.2.36-.36c36.301-36.672 36.14-96.07-.37-132.58-8.214-8.214-17.577-14.58-27.585-19.109-4.566-2.066-7.426-6.667-7.134-11.67a62.197 62.197 0 0 1 2.826-15.259c2.103-6.601 9.531-9.961 15.919-7.28 15.073 6.324 29.187 15.62 41.435 27.868 50.688 50.689 50.679 133.17 0 183.851zm-90.296-93.554c12.248 12.248 26.362 21.544 41.435 27.868 6.388 2.68 13.816-.68 15.919-7.28a62.197 62.197 0 0 0 2.826-15.259c.292-5.003-2.569-9.604-7.134-11.67-10.008-4.528-19.371-10.894-27.585-19.109-36.51-36.51-36.671-95.908-.37-132.58l.36-.36 79.2-79.2c36.752-36.731 96.181-36.738 132.94 0 36.731 36.752 36.738 96.181 0 132.94-.157.157-58.819 58.817-75.3 75.286-2.651 2.65-3.878 6.379-3.397 10.096a163.156 163.156 0 0 1 1.216 14.384c.413 10.291 12.659 15.291 20.208 8.286a131.324 131.324 0 0 0 3.532-3.403l79.19-79.2c50.824-50.803 50.799-133.062 0-183.84-50.802-50.824-133.062-50.799-183.84 0l-79.2 79.19c-50.679 50.682-50.688 133.163 0 183.851z"/></svg></span></button><a class="Share--Item-3gxqn Share--Item-color-twitter-3gxqn" href="http://twitter.com/intent/tweet?status=FP%20in%20date-fns%20v2%3A%20https%3A%2F%2Fblog.date-fns.org%2Fpost%2Ffp-in-date-fns-v2-3vlg53s8y5d3i" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-facebook-3gxqn" href="http://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Ffp-in-date-fns-v2-3vlg53s8y5d3i" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-telegram-3gxqn" href="https://t.me/share/url?url=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Ffp-in-date-fns-v2-3vlg53s8y5d3i&text=FP%20in%20date-fns%20v2" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-vk-3gxqn" href="http://vk.com/share.php?url=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Ffp-in-date-fns-v2-3vlg53s8y5d3i&title=FP%20in%20date-fns%20v2" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M545 117.7c3.7-12.5 0-21.7-17.8-21.7h-58.9c-15 0-21.9 7.9-25.6 16.7 0 0-30 73.1-72.4 120.5-13.7 13.7-20 18.1-27.5 18.1-3.7 0-9.4-4.4-9.4-16.9V117.7c0-15-4.2-21.7-16.6-21.7h-92.6c-9.4 0-15 7-15 13.5 0 14.2 21.2 17.5 23.4 57.5v86.8c0 19-3.4 22.5-10.9 22.5-20 0-68.6-73.4-97.4-157.4-5.8-16.3-11.5-22.9-26.6-22.9H38.8c-16.8 0-20.2 7.9-20.2 16.7 0 15.6 20 93.1 93.1 195.5C160.4 378.1 229 416 291.4 416c37.5 0 42.1-8.4 42.1-22.9 0-66.8-3.4-73.1 15.4-73.1 8.7 0 23.7 4.4 58.7 38.1 40 40 46.6 57.9 69 57.9h58.9c16.8 0 25.3-8.4 20.4-25-11.2-34.9-86.9-106.7-90.3-111.5-8.7-11.2-6.2-16.2 0-26.2.1-.1 72-101.3 79.4-135.6z"/></svg></span></a></div><div><a class="index--Button-1n9w3 index--Button-transparent-1n9w3" href="../../post/fp-in-date-fns-v2-3vlg53s8y5d3i/#comments">Leave a comment</a></div></div></div></div><form class="index--Card-39g3x index--Card-color-secondary-39g3x" method="post" action="https://cafe.us16.list-manage.com/subscribe/post?u=bf10ea6555c1dc38f3bcfa7e5&amp;amp;id=efa3d1b1ba" target="_blank"><div class="index--El-15a2g index--El-padded-15a2g index--El-size-xlarge-15a2g"><div class="index--H-15a2g index--H-distributed-15a2g index--H-wrapOn-mobileMedium-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><div class="index--Header-fong0">Join date-fns newsletter üëâ</div><div class="index--Text-fong0">Subscribe to the date-fns newsletter to receive community updates, news and tips about the library and JavaScript dates in general.</div></div><div class="index--V-15a2g"><div class="Input--Wrapper-2n0tw Input--Wrapper-fullWidth-2n0tw Input--Wrapper-size-large-2n0tw Input--Wrapper-style-default-2n0tw"><input class="Input--Control-2n0tw" name="EMAIL" type="email" placeholder="name@example.com"></div><button class="index--Button-1n9w3 index--Button-color-positive-1n9w3 index--Button-size-large-1n9w3" type="submit">Subscribe now</button></div></div></div></form><div class="index--Card-39g3x"><div class="index--El-15a2g index--El-padded-15a2g index--El-size-xlarge-15a2g"><div class="index--V-15a2g index--V-size-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><a class="AbstractLink--Undecorated-2awh2" href="../../post/unicode-tokens-in-date-fns-v2-sreatyki91jg/"><h1 class="index--Header-bold-fong0 index--Header-fong0 index--Header-size-large-fong0">Unicode tokens in date-fns v2</h1></a><div class="index--H-15a2g index--H-adjusted-15a2g"><a class="AbstractLink--A-2awh2" href="../../post/unicode-tokens-in-date-fns-v2-sreatyki91jg/">Oct 10, 2018</a><div class="index--Text-color-secondary-fong0 index--Text-fong0">2 mins read</div><div class="index--Text-color-secondary-fong0 index--Text-fong0">Sasha üêëüí® Koss</div></div></div><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">In this post, I tell about how and why we switched from Moment.js formatting tokens to Unicode Technical Standard #35: <a class="AbstractLink--A-2awh2" target="_blank" rel="noopener noreferrer" href="https://unicode.org/reports/tr35/tr35-dates.html">https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table</a></p><blockquote class="Blockquote--Wrapper-2832n"><div class="index--El-15a2g index--El-padded-15a2g"><div class="index--V-15a2g"><p class="index--Text-fong0 index--Text-size-large-fong0">date-fns v2 introduces many new features and breaking changes and this post is a part of a series <a class="AbstractLink--A-2awh2 AbstractLink--A-strong-2awh2" transparent href>#date_fns_v2</a> where we describe in detail most notable ones.</p></div></div></blockquote><p class="index--Text-fong0 index--Text-size-large-fong0">When we worked on the <span class="index--Code-fong0">format</span> function, we mimicked Moment.js behavior that we thought would simplify the transition to date-fns. It also didn't make sense to reinvent the wheel, so we decided to stick to its selection of tokens.</p><p class="index--Text-fong0 index--Text-size-large-fong0">In turned out that <span class="index--Code-fong0">YYYY</span> and <span class="index--Code-fong0">DD</span> (year and day) tokens are misused in Moment.js because many other languages (Java, C#, Objective-C, etc.) use <span class="index--Code-fong0">yyyy</span> and <span class="index--Code-fong0">dd</span> for this purpose:</p><div><div class="ExtendedNode--Wrapper-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><div class="LinkPreview--Wrapper-3mjlt"><a class="AbstractLink--Undecorated-2awh2" target="_blank" rel="noopener noreferrer" href="https://github.com/date-fns/date-fns/issues/520"><div class="LinkPreview--Inner-3mjlt"><div class="index--El-15a2g index--El-paddedH-xlarge-15a2g index--El-paddedV-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"><div class="index--H-15a2g index--H-size-small-15a2g"><div class="index--V-15a2g index--V-size-xsmall-15a2g"><div class="index--Header-fong0 index--Header-size-xsmall-fong0" secondary>GitHub</div><div class="index--Header-fong0 index--Header-size-small-fong0">YYYY should be yyyy and DD should be dd #520</div><div class="index--Text-content-fong0 index--Text-fong0">The tokens accepted by date-fns are different with what most languages and libraries support. I focus here on YYYY and DD. Comparable: AngularJS: yyyy dd instead of YYYY DD Qt: yyyy dd instead of ...</div></div></div></div></div></div></a></div></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">In v2 we decided to improve on consistency and standardization. We worked hard to make date-fns behave like ECMAScript in edge cases and opted to use existing standards over common conventions. So it made sense to follow the proposed specifications from the Unicode Consortium.</p><p class="index--Text-fong0 index--Text-size-large-fong0">Unfortunately, this change caused a flood of issues reporting misbehaving <span class="index--Code-fong0">format</span> and <span class="index--Code-fong0">parse</span>. Developers kept using <span class="index--Code-fong0">YYYY</span> and <span class="index--Code-fong0">DD</span> and getting confusing results. To solve this problem, we had to disable confusing tokens <span class="index--Code-fong0">D</span>, <span class="index--Code-fong0">DD</span>, <span class="index--Code-fong0">YY</span> and <span class="index--Code-fong0">YYYY</span> and throw an error:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">format(Date.now(), 'YYYY-MM-DD')
//=&gt; RangeError: `options.awareOfUnicodeTokens` must be set to `true` to use `YYYY` token; see: https://git.io/fxCyr</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">To enable those tokens, you should set the <span class="index--Code-fong0">awareOfUnicodeTokens</span> option:</p><p class="index--Text-fong0 index--Text-size-large-fong0"></p><div><div class="ExtendedNode--Wrapper-2h9ui ExtendedNode--Wrapper-scrollable-2h9ui"><div class="ExtendedNode--Spacer-2h9ui"></div><pre class="Pre--Code-2pf0n">format(Date.now(), 'YY-MM-dd', { awareOfUnicodeTokens: true })
//=&gt; '86-04-04'</pre></div></div><p class="index--Text-fong0 index--Text-size-large-fong0">I hope in the future when and if developers get used to the standard we'll remove this option.</p><div class="index--V-15a2g"><div class="Recap--Divider-jbvil">„Éª„Éª„Éª</div><div class="index--Text-fong0 index--Text-italic-fong0 index--Text-size-large-fong0">Happy coding time! Please support us at Open Collective: opencollective.com/date-fns</div></div></div><div class="Share--Wrapper-3gxqn"><button class="Share--Item-3gxqn Share--Item-color-link-3gxqn"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M301.148 394.702l-79.2 79.19c-50.778 50.799-133.037 50.824-183.84 0-50.799-50.778-50.824-133.037 0-183.84l79.19-79.2a132.833 132.833 0 0 1 3.532-3.403c7.55-7.005 19.795-2.004 20.208 8.286.193 4.807.598 9.607 1.216 14.384.481 3.717-.746 7.447-3.397 10.096-16.48 16.469-75.142 75.128-75.3 75.286-36.738 36.759-36.731 96.188 0 132.94 36.759 36.738 96.188 36.731 132.94 0l79.2-79.2.36-.36c36.301-36.672 36.14-96.07-.37-132.58-8.214-8.214-17.577-14.58-27.585-19.109-4.566-2.066-7.426-6.667-7.134-11.67a62.197 62.197 0 0 1 2.826-15.259c2.103-6.601 9.531-9.961 15.919-7.28 15.073 6.324 29.187 15.62 41.435 27.868 50.688 50.689 50.679 133.17 0 183.851zm-90.296-93.554c12.248 12.248 26.362 21.544 41.435 27.868 6.388 2.68 13.816-.68 15.919-7.28a62.197 62.197 0 0 0 2.826-15.259c.292-5.003-2.569-9.604-7.134-11.67-10.008-4.528-19.371-10.894-27.585-19.109-36.51-36.51-36.671-95.908-.37-132.58l.36-.36 79.2-79.2c36.752-36.731 96.181-36.738 132.94 0 36.731 36.752 36.738 96.181 0 132.94-.157.157-58.819 58.817-75.3 75.286-2.651 2.65-3.878 6.379-3.397 10.096a163.156 163.156 0 0 1 1.216 14.384c.413 10.291 12.659 15.291 20.208 8.286a131.324 131.324 0 0 0 3.532-3.403l79.19-79.2c50.824-50.803 50.799-133.062 0-183.84-50.802-50.824-133.062-50.799-183.84 0l-79.2 79.19c-50.679 50.682-50.688 133.163 0 183.851z"/></svg></span></button><a class="Share--Item-3gxqn Share--Item-color-twitter-3gxqn" href="http://twitter.com/intent/tweet?status=Unicode%20tokens%20in%20date-fns%20v2%3A%20https%3A%2F%2Fblog.date-fns.org%2Fpost%2Funicode-tokens-in-date-fns-v2-sreatyki91jg" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-facebook-3gxqn" href="http://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Funicode-tokens-in-date-fns-v2-sreatyki91jg" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-telegram-3gxqn" href="https://t.me/share/url?url=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Funicode-tokens-in-date-fns-v2-sreatyki91jg&text=Unicode%20tokens%20in%20date-fns%20v2" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"/></svg></span></a><a class="Share--Item-3gxqn Share--Item-color-vk-3gxqn" href="http://vk.com/share.php?url=https%3A%2F%2Fblog.date-fns.org%2Fpost%2Funicode-tokens-in-date-fns-v2-sreatyki91jg&title=Unicode%20tokens%20in%20date-fns%20v2" target="_blank" rel="noopener noreferrer"><span class="Icon--IconWrapper-149zl Icon--IconWrapper-size-medium-149zl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M545 117.7c3.7-12.5 0-21.7-17.8-21.7h-58.9c-15 0-21.9 7.9-25.6 16.7 0 0-30 73.1-72.4 120.5-13.7 13.7-20 18.1-27.5 18.1-3.7 0-9.4-4.4-9.4-16.9V117.7c0-15-4.2-21.7-16.6-21.7h-92.6c-9.4 0-15 7-15 13.5 0 14.2 21.2 17.5 23.4 57.5v86.8c0 19-3.4 22.5-10.9 22.5-20 0-68.6-73.4-97.4-157.4-5.8-16.3-11.5-22.9-26.6-22.9H38.8c-16.8 0-20.2 7.9-20.2 16.7 0 15.6 20 93.1 93.1 195.5C160.4 378.1 229 416 291.4 416c37.5 0 42.1-8.4 42.1-22.9 0-66.8-3.4-73.1 15.4-73.1 8.7 0 23.7 4.4 58.7 38.1 40 40 46.6 57.9 69 57.9h58.9c16.8 0 25.3-8.4 20.4-25-11.2-34.9-86.9-106.7-90.3-111.5-8.7-11.2-6.2-16.2 0-26.2.1-.1 72-101.3 79.4-135.6z"/></svg></span></a></div><div><a class="index--Button-1n9w3 index--Button-transparent-1n9w3" href="../../post/unicode-tokens-in-date-fns-v2-sreatyki91jg/#comments">Leave a comment</a></div></div></div></div><a class="index--Button-1n9w3 index--Button-size-large-1n9w3 index--Button-transparent-1n9w3" href="../../page/MTUzOTE5MjYyNw==/">Next page</a></div></div><div class="Footer--Wrapper-2j8q3"><a class="AbstractLink--A-2awh2" target="_blank" href="https://telepost.io/?utm_source=date-fns&utm_medium=blogs-footer&utm_campaign=telepost-link&utm_content=runs-on-telepost"><span class="index--H-15a2g index--H-adjusted-15a2g index--H-size-small-15a2g"><span class="Logo--LogoWrapper-312b2 Logo--LogoWrapper-size-xsmall-312b2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 165 128"><g fill="none" fill-rule="evenodd"><path fill="#FBB530" d="M82.7.2v127.7l-32-34.2z"/><path fill="#65B044" d="M82.7.2L.1 96.1l50.6-2.4z"/><g><path fill="#E21A27" d="M82.3.2v127.7l32-34.2z"/><path fill="#2198D6" d="M82.3.2l82.6 95.9-50.6-2.4z"/></g></g></svg></span><span class="index--Text-fong0">Runs on Telepost</span></span></a><div class="index--H-15a2g index--H-adjusted-15a2g index--H-size-small-15a2g"><a class="AbstractLink--A-2awh2" target="_blank" href="https://t.me/date_fns">date-fns</a><div class="index--Text-fong0">¬© 2019</div></div></div></div><div class="index--Vbr-15a2g index--Vbr-size-large-15a2g"></div></div></div><div class="Component--Wrapper-1nnei"><div class="index--V-15a2g index--V-padded-15a2g index--V-size-large-15a2g"><div class="index--V-15a2g index--V-size-small-15a2g"></div></div></div></div>

        <script src="https://cdn.ravenjs.com/3.26.4/raven.min.js" crossorigin="anonymous"></script>
    <script>Raven.config('https://cfa374af8171451d961c48a8d1e77349@sentry.io/1244209', {
      environment: 'production'
    }).install()</script>
        
    
  </body>
</html>
